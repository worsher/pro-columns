"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const h=(t,s)=>{if(!t.strategys||t.strategys.length===0||s.mode==="replace")return s;{const n=[];return t.strategys.forEach(e=>{n.push(...e.strategy)}),n.push(...s.strategy),{mode:"merge",strategy:n}}},C=(t,s,n)=>{let e={...t};return s.forEach(o=>{if(o.scene){const u=Array.isArray(o.scene)?o.scene:[o.scene];if(n&&!u.includes(n))return}o.strategy.forEach(u=>{const g=u(e,n);e={...e,...g}})}),delete e.strategys,e},M=(t,s)=>t.map(e=>({...e})).map(e=>e.strategys?(e.strategys=e.strategys.map(o=>h(e,o)),C(e,e.strategys,s)):e),f=t=>{const{columns:s,enums:n={},scene:e,applyStrategies:o,mergeMode:u=!0,columnStrategies:g}=t,i=s.map(a=>{const r={...a};if("enumKey"in r&&r.enumKey){const c=r.enumKey;n[c]&&(r.valueEnum=n[c]),delete r.enumKey}return r}).map(a=>{if(!o||o.length===0)return a;const r={...a},c={mode:"merge",strategy:o};return u?r.strategys=[...a.strategys||[],c]:r.strategys=[c],r}).map(a=>{if(!g||g.length===0)return a;const r=g.find(S=>S.dataIndex===a.dataIndex);if(!r)return a;const c={...a},y={mode:"merge",strategy:r.strategies};return(r.mergeMode!==void 0?r.mergeMode:!0)?c.strategys=[...c.strategys||[],y]:c.strategys=[y],c});return M(i,e)},m=new Map,b={proTable:"table",proForm:"form",proDescription:"description"},A={register(t){m.set(t.name,t)},getAdapter(t){return m.get(t)},transform(t,s,n){const e=this.getAdapter(t);if(!e)return console.warn(`Component adapter "${t}" not found, returning original columns`),s;const{enums:o,scene:u,applyStrategies:g,mergeMode:l=!0,columnStrategies:d}=n||{},i=u||e.scene||b[t],p=f({columns:s,enums:o,scene:i,applyStrategies:g,mergeMode:l,columnStrategies:d});return e.transform(p)},getAdapterNames(){return Array.from(m.keys())},clear(){m.clear()}};exports.Columns=f;exports.Component=A;
//# sourceMappingURL=pro-columns.cjs.map
